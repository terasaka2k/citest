dependencies:
  cache_directories:
    - mycache
  pre:
    - touch SKIP_DEPS
    - test -f SKIP_DEPS || touch INST_DEPS

    - >-
      test -f SKIP_DEPS
      || echo "Removing dependencies cache"
      && rm -rf mycache && mkdir mycache
  override:
    - >-
      test -f INST_DEPS
      || echo "Skipping dependencies installation"
      && ehco "Copying dependencies"
      && cp -ra mycache/node_modules .
    - >-
      test -f SKIP_DEPS
      || echo "Installing dependencies"
      && npm i xtend
      && cp -ra node_modules mycache/

test:
  override:
    - ls
    - /bin/true

deployment:
  lab:
    branch: lab
    commands:
      - echo "Deploying"
